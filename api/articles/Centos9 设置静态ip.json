{"title":"centos静态ip","uid":"91ae628334b56d49e8492c0230e20335","slug":"Centos9 设置静态ip","date":"2023-10-09T19:26:21.653Z","updated":"2023-10-21T15:49:39.604Z","comments":true,"path":"api/articles/Centos9 设置静态ip.json","keywords":null,"cover":"https://s2.loli.net/2023/10/21/HvaSjQZg6yzrOmI.webp","content":"<p>Centos9 设置静态ip</p>\n<p>相对以前centos7之类的，9版本的默认的网络是NetworkManager，网络配置也有较大改变</p>\n<ol>\n<li><p>进入配置文件所在目录，用vim进行编辑</p>\n<div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">cd</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">/etc/NetworkManager/system-connections</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">vim</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C3E88D\">ens160.nmconnection</span></span>\n<span class=\"line\"></span></code></pre></div></li>\n<li><p>按i进行编辑，编辑完之后按esc，再按 :wq(注意冒号)</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">[connection]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">id=ens160</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">uuid=ddc44f66-1f11-38d8-8d3b-1522212d1018</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">type=ethernet</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">autoconnect-priority=-999</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">interface-name=ens160</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">timestamp=1696745971</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[ethernet]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[ipv4]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">#method=auto</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">method=manual</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">address1=172.16.18.129/24,172.16.18.2</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">dns=114.114.114.114</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[ipv6]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">addr-gen-mode=eui64</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">method=auto</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[proxy]</span></span></code></pre></div><p>Tips: 主要是[ipv4]编辑</p>\n<ol>\n<li>不要有多行空行，dns下面尤其注意，注释最好也删干净，防止不合法空格</li>\n<li>method设置为manual表示手动</li>\n<li>address1等号后面第一个就是你的静态ip，可以使用原来分配的，斜杆后的24表示掩码255.255.255.0。后面的ip表示网关，前3位与静态ip一样，最后一位最好取2，取1的时候可能出现ping不通外网</li>\n<li>dns可以用114.114.114.144或者8.8.8.8。如果有多个，用分号连接</li>\n</ol>\n</li>\n<li><div class=\"language-shell\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">shell</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">nmcli</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">n</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">#查看networkmanager启动与否</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">nmcli</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">c</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">reload</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">#重新加载配置文件，c是connection的缩写，connect，co之类的替代都可以</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">nmcli</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">c</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">up</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">ens160</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">#启动你设置的网卡ens160</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">nmcli</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C3E88D\">d</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\"># 查看网卡状态，也可以用ifconfig</span></span></code></pre></div></li>\n</ol>\n<p>存在的问题：</p>\n<ol>\n<li>如果出现：未知的连接 “ens160”,十有八九是配置文件存在语法和拼写错误</li>\n<li>网卡能启动，但主机连接不上虚拟机，大概率是网关设置错误，比如最后一位设置成1.</li>\n<li>配置前自动ip能访问，静态ip不能访问，只有配置文件存在问题的可能性，不需要去设置防火墙之类的</li>\n</ol>\n","feature":true,"text":"Centos9 设置静态ip 相对以前centos7之类的，9版本的默认的网络是NetworkManager，网络配置也有较大改变 进入配置文件所在目录，用vi...","permalink":"/post/Centos9 设置静态ip","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"linux","slug":"linux","count":1,"path":"api/categories/linux.json"}],"tags":[{"name":"centos","slug":"centos","count":1,"path":"api/tags/centos.json"},{"name":"network","slug":"network","count":1,"path":"api/tags/network.json"}],"toc":"","author":{"name":"tomarsqiu","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/20/pSydNQBgwYhA1Pz.webp","link":"/","description":"技术宅","socials":{"github":"https://github.com/tomarsqiu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"hexo个人博客搭建","uid":"059268b56602cb55de9c68eb7a3eddc3","slug":"hexo个人博客搭建","date":"2023-10-20T09:26:03.497Z","updated":"2023-10-20T13:13:08.415Z","comments":true,"path":"api/articles/hexo个人博客搭建.json","keywords":null,"cover":"https://s2.loli.net/2023/10/20/17xLXcsFYmRP4by.webp","text":"hexo个人博客搭建​ 前提需要安装node，建议用nvm安装 设置淘宝镜像（或者开vpn) shellnpm config set registry http...","permalink":"/post/hexo个人博客搭建","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"软件安装","slug":"软件安装","count":3,"path":"api/categories/软件安装.json"}],"tags":[{"name":"aurora","slug":"aurora","count":1,"path":"api/tags/aurora.json"},{"name":"hero","slug":"hero","count":1,"path":"api/tags/hero.json"}],"author":{"name":"tomarsqiu","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/20/pSydNQBgwYhA1Pz.webp","link":"/","description":"技术宅","socials":{"github":"https://github.com/tomarsqiu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"docker安装","uid":"30203d9cdc7458d307e82acc7bbcb96a","slug":"docker教程","date":"2023-10-08T13:31:06.815Z","updated":"2023-10-21T16:05:14.808Z","comments":true,"path":"api/articles/docker教程.json","keywords":null,"cover":"https://s2.loli.net/2023/10/22/DstLCnxGhRA6J1S.png","text":"Docker教程安装 进入官网 搜索框搜索对应的操作系统按指导下载即可 以下为centos系统下的安装 shell # 卸载旧版本docker sudo yum...","permalink":"/post/docker教程","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"软件安装","slug":"软件安装","count":3,"path":"api/categories/软件安装.json"}],"tags":[{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}],"author":{"name":"tomarsqiu","slug":"blog-author","avatar":"https://s2.loli.net/2023/10/20/pSydNQBgwYhA1Pz.webp","link":"/","description":"技术宅","socials":{"github":"https://github.com/tomarsqiu","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}